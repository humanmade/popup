(()=>{const e=t=>{!t.toElement&&!t.relatedTarget&&t.clientY<10&&(document.removeEventListener("mouseout",e),document.querySelector("html").classList.add("has-modal-open"),document.querySelector('.wp-block-hm-popup[data-trigger="exit"]').showModal(),window.localStorage.setItem("exitIntentShown",Date.now()))},t=e=>{document.querySelector("html").classList.add("has-modal-open"),e.showModal()},o=(e,t)=>parseInt(window.localStorage.getItem(e)||0,10)>=Date.now()-24*t*60*60*1e3,a=()=>{let a=!1;document.querySelectorAll(".wp-block-hm-popup").forEach(n=>{const r="true"===n.dataset.dismissOnSubmit;if(n.addEventListener("close",()=>{document.querySelector("html").classList.remove("has-modal-open")}),r&&n.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",()=>{n.close()})}),"click"===n?.dataset.trigger&&document.querySelectorAll(`[href$="#${n.id||"open-popup"}"]`).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),t(n)})}),"exit"===n?.dataset.trigger){const t=parseInt(n?.dataset.expiry||7,10);o("exitIntentShown",t)||a||(a=!0,setTimeout(()=>{document.addEventListener("mouseout",e)},2e3))}if("load"===n?.dataset.trigger){const e=parseInt(n?.dataset.expiry||7,10),a=`loadPopupShown_${n.id||"popup"}`;o(a,e)||(t(n),window.localStorage.setItem(a,Date.now()))}}),document.querySelectorAll([".wp-block-hm-popup__close",'.wp-block-hm-popup [href$="#close"]'].join(",")).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.currentTarget.closest(".wp-block-hm-popup").close()})})};"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)})();