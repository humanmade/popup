(()=>{const e=t=>{!t.toElement&&!t.relatedTarget&&t.clientY<10&&(document.removeEventListener("mouseout",e),document.querySelector("html").classList.add("has-modal-open"),document.querySelector('.wp-block-hm-popup[data-trigger="exit"]').showModal(),window.localStorage.setItem("exitIntentShown",Date.now()))},t=e=>{document.querySelector("html").classList.add("has-modal-open"),e.showModal()},o=(e,t)=>parseInt(window.localStorage.getItem(e)||0,10)>=Date.now()-24*t*60*60*1e3,n=()=>{let n=!1;document.querySelectorAll(".wp-block-hm-popup").forEach(a=>{var c;const l="true"===a.dataset.dismissOnSubmit,r=parseInt(null!==(c=a?.dataset.expiry)&&void 0!==c?c:7,10);if("any"===a.closedBy&&a.addEventListener("click",e=>{e.currentTarget===a&&a.close()}),a.addEventListener("close",()=>{document.querySelector("html").classList.remove("has-modal-open")}),l&&a.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",()=>{a.close()})}),"click"===a?.dataset.trigger){const e=a.classList.contains("is-style-anchored");document.querySelectorAll(`[href$="#${a.id||"open-popup"}"]`).forEach(o=>{o.addEventListener("click",n=>{n.preventDefault(),e&&((e,t)=>{const o=e.dataset.anchorPosition||"bottom",n=`--popup-anchor-${e.id||"default"}`;t.style.anchorName=n,e.style.positionAnchor=n,e.dataset.anchorPositionActive=o})(a,o),t(a)})})}if("exit"===a?.dataset.trigger&&(o("exitIntentShown",r)||n||(n=!0,setTimeout(()=>{document.addEventListener("mouseout",e)},2e3))),"load"===a?.dataset.trigger){const e=`loadPopupShown_${a.id||"popup"}`;o(e,r)||(t(a),window.localStorage.setItem(e,Date.now()))}}),document.querySelectorAll([".wp-block-hm-popup__close",'.wp-block-hm-popup [href$="#close"]'].join(",")).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.currentTarget.closest(".wp-block-hm-popup").close()})})};"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)})();