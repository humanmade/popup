(()=>{"use strict";var e,t={254:(e,t,o)=>{const r=window.wp.blocks,i=window.wp.element,a=window.wp.i18n,n=window.wp.blockEditor,p=window.wp.components,s=window.ReactJSXRuntime,l=[{value:"click",label:(0,a.__)("On click","hm-popup")},{value:"exit",label:(0,a.__)("On exit intent","hm-popup")},{value:"load",label:(0,a.__)("On page load","hm-popup")}],c=({position:e})=>{let t,o;switch(e){case"top":t=11,o=5;break;case"top-start":t=12,o=5;break;case"top-end":t=10,o=5;break;case"bottom":default:t=11,o=21;break;case"bottom-start":t=12,o=21;break;case"bottom-end":t=10,o=21;break;case"left":t=1,o=13;break;case"left-start":t=1,o=12;break;case"left-end":t=1,o=14;break;case"right":t=21,o=13;break;case"right-start":t=21,o=12;break;case"right-end":t=21,o=14}return(0,s.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:12,y:12,width:8,height:8,rx:"1",fill:"currentColor",opacity:"0.6"}),(0,s.jsx)("rect",{x:t,y:o,width:10,height:6,rx:"1",fill:"currentColor"})]})},u=({value:e,onChange:t})=>(0,s.jsx)(p.BaseControl,{id:"hm-popup-anchor-position",label:(0,a.__)("Anchor Position","hm-popup"),help:(0,a.__)("Choose where the popup appears relative to the trigger button.","hm-popup"),__nextHasNoMarginBottom:!0,children:(0,s.jsx)("div",{className:"hm-popup-anchor-position-grid",children:[["top-start","top","top-end"],["left-start",null,"right-start"],["left",null,"right"],["left-end",null,"right-end"],["bottom-start","bottom","bottom-end"]].map((o,r)=>(0,s.jsx)("div",{className:"hm-popup-anchor-position-row",children:o.map((o,i)=>o?(0,s.jsx)(p.Button,{className:"hm-popup-anchor-position-button "+(e===o?"is-selected":""),onClick:()=>t(o),label:o.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),children:(0,s.jsx)(c,{position:o})},o):(0,s.jsx)("div",{className:"hm-popup-anchor-position-center",children:(0,s.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:(0,s.jsx)("rect",{x:"12",y:"12",width:"8",height:"8",rx:"1",fill:"currentColor",opacity:"0.3"})})},`empty-${r}-${i}`))},r))})}),d=[{attributes:{opacity:{type:"number",default:75},trigger:{type:"string",default:"click",enum:["click","exit","load"]},cookieExpiration:{type:"number",default:7},dismissible:{type:"boolean",default:!0},dismissOnSubmit:{type:"boolean",default:!1}},save:({attributes:e})=>{const t=n.useBlockProps.save(),{children:o,...r}=n.useInnerBlocksProps.save(t);return(0,s.jsx)("dialog",{...r,"data-trigger":e.trigger||"click","data-expiry":e.cookieExpiration,"data-backdrop-opacity":(e.opacity||1)/100,"data-backdrop-color":e.backgroundColor,"data-dismissible":!1!==e.dismissible?"true":"false","data-dismiss-on-submit":e.dismissOnSubmit?"true":"false",children:o})}},{attributes:{opacity:{type:"number",default:75},trigger:{type:"string",default:"click",enum:["click","exit","load"]},cookieExpiration:{type:"number",default:7}},save:({attributes:e})=>{const t=n.useBlockProps.save(),{children:o,...r}=n.useInnerBlocksProps.save(t);return(0,s.jsx)("dialog",{...r,"data-trigger":e.trigger||"click","data-expiry":e.cookieExpiration,"data-backdrop-opacity":(e.opacity||1)/100,"data-backdrop-color":e.backgroundColor,children:o})}}],h=window.wp.hooks,g=window.wp.compose,b=window.wp.domReady;var m=o.n(b);const k=window.wp.data;m()(()=>{(0,r.registerBlockVariation)("core/button",{name:"hm-popup-close",title:(0,a.__)("Close Popup","hm-popup"),icon:"exit",scope:["block","inserter","transform"],attributes:{url:"#close",metadata:{popup:"close"}},isActive:e=>"close"===e.metadata?.popup}),(0,r.registerBlockVariation)("core/button",{name:"hm-popup-open",title:(0,a.__)("Open Popup","hm-popup"),icon:"exit",scope:["block","inserter","transform"],attributes:{metadata:{popup:"open"}},isActive:e=>"open"===e.metadata?.popup})});const x=(0,g.createHigherOrderComponent)(e=>function(t){const{name:o,attributes:r,setAttributes:i}=t,l=(0,k.useSelect)(e=>{if("core/button"!==o||!r.metadata?.popup)return null;const t=e("core/block-editor");return[{label:(0,a.__)("Select a popupâ€¦","hm-popup"),value:""},...t.getBlocksByName("hm/popup").map(e=>t.getBlock(e)).filter(e=>e?.attributes.anchor&&"click"===e?.attributes.trigger).map(e=>({label:e.attributes.anchor,value:`#${e.attributes.anchor}`}))]},[o,r.metadata?.popup]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e,{...t}),l&&(0,s.jsx)(n.InspectorControls,{children:(0,s.jsx)(p.PanelBody,{title:(0,a.__)("Popup","hm-popup"),children:(0,s.jsx)(p.SelectControl,{label:(0,a.__)("Open Popup","hm-popup"),value:r.url||"",options:l,onChange:e=>i({url:e})})})})]})},"withPopupControls");(0,h.addFilter)("editor.BlockEdit","hm-popup/with-popup-controls",x),(0,r.registerBlockType)("hm/popup",{edit:function({attributes:e,setAttributes:t,clientId:o}){var r;const{opacity:c,backgroundColor:d,style:h,layout:g}=e,b=Number((c||0)/100).toFixed(2),m=[],k={backgroundSize:h?.background?.backgroundSize||"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:""};d&&(k.backgroundColor=`color(from var(--wp--preset--color--${d}) srgb r g b / ${b}) !important`),h?.color?.gradient?m.push(h.color.gradient):m.push("repeating-linear-gradient( 45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2) 10px, rgba(0, 0, 0, 0.2) 10px, rgba(0, 0, 0, 0.2) 20px)"),k.backgroundImage=`${m.join(", ")} !important`;const x=e.className?.includes("is-style-anchored")||e.className?.includes("is-style-side--left")||e.className?.includes("is-style-side--right"),y=e.className?.includes("is-style-anchored");(0,i.useEffect)(()=>{x&&!g?.contentSize&&t({layout:{...g||{},type:"constrained",contentSize:"360px"}})},[x,g,t]);const{...v}=(0,n.useBlockProps)({style:k}),{children:w,...f}=(0,n.useInnerBlocksProps)(v,{template:[["core/group",{lock:{move:!0,remove:!0},backgroundColor:"white",style:{spacing:{padding:{top:"var:preset|spacing|40",bottom:"var:preset|spacing|40",left:"var:preset|spacing|40",right:"var:preset|spacing|40"}}}},[["core/paragraph"]]]],allowedBlocks:["core/group"],renderAppender:!1}),[_,j]=(0,i.useState)(!1);return(0,s.jsxs)("div",{...f,children:[(0,s.jsx)("style",{children:`#block-${o} {\n\t\t\t\t\tbackground-color: ${null!==(r=k.backgroundColor)&&void 0!==r?r:"white"};\n\t\t\t\t\t&::before {\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: 0; right: 0;\n\t\t\t\t\t\ttop: 0; bottom: 0;\n\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t\tbackground-image: ${k.backgroundImage};\n\t\t\t\t\t\tbackground-repeat: ${k.backgroundRepeat};\n\t\t\t\t\t\tbackground-size: ${k.backgroundSize};\n\t\t\t\t\t\tbackground-position: ${k.backgroundPosition};\n\t\t\t\t\t\topacity: ${b};\n\t\t\t\t\t}\n\t\t\t\t`}),(0,s.jsxs)(n.InspectorControls,{group:"default",children:[(0,s.jsxs)(p.PanelBody,{children:["exit"===e.trigger&&(0,s.jsx)("p",{children:(0,a.__)("The popup will be invisible until the user moves their mouse cursor up and out of the window or tab.","hm-popup")}),"load"===e.trigger&&(0,s.jsx)("p",{children:(0,a.__)("The popup will appear immediately when the page loads.","hm-popup")}),e.dismissible?(0,s.jsx)("p",{children:(0,a.__)("Clicking the background or pressing escape will close the popup.","hm-popup")}):(0,s.jsx)("p",{children:(0,a.__)("The popup cannot be closed by clicking the background or pressing escape.","hm-popup")}),(0,s.jsx)("p",{children:(0,a.__)('A link or button with the URL "#close" anywhere within the popup will also close it.',"hm-popup")})]}),(0,s.jsxs)(p.PanelBody,{children:[(0,s.jsx)(p.SelectControl,{label:(0,a.__)("Popup Trigger","hm-popup"),options:l,value:e.trigger,onChange:e=>t({trigger:e})}),"click"===e.trigger&&(0,s.jsx)(p.TextControl,{label:(0,a.__)("Anchor / ID","hm-popup"),help:(0,s.jsxs)(s.Fragment,{children:[(0,a.__)("You can set any button or link url to the following value to trigger this popup:","hm-popup"),(0,s.jsx)("br",{}),(0,s.jsxs)("code",{children:["#",e.anchor]}),(0,s.jsx)(p.ClipboardButton,{variant:"secondary",text:`#${e.anchor}`,onCopy:()=>j(!0),onFinishCopy:()=>j(!1),children:_?"Copied!":"Copy Text"})]}),value:e.anchor||"",onChange:e=>t({anchor:e})}),("exit"===e.trigger||"load"===e.trigger)&&(0,s.jsx)(p.RangeControl,{label:(0,a.__)("Cookie expiration","hm-popup"),help:(0,a.__)("Number of days before popup can be shown again to the current visitor","hm-popup"),value:e.cookieExpiration,onChange:e=>t({cookieExpiration:e}),min:0,max:30}),(0,s.jsx)(p.ToggleControl,{label:(0,a.__)("Dismissible","hm-popup"),help:(0,a.__)("Allow the popup to be closed by clicking the backdrop or pressing Escape.","hm-popup"),checked:!1!==e.dismissible,onChange:e=>t({dismissible:e})}),(0,s.jsx)(p.ToggleControl,{label:(0,a.__)("Dismiss on form submit","hm-popup"),help:(0,a.__)("Automatically close the popup when a form inside it is submitted.","hm-popup"),checked:!!e.dismissOnSubmit,onChange:e=>t({dismissOnSubmit:e})})]})]}),(0,s.jsxs)(n.InspectorControls,{group:"styles",children:[(0,s.jsx)(p.PanelBody,{children:(0,s.jsx)(p.RangeControl,{label:(0,a.__)("Backdrop opacity","hm-popup"),value:e.opacity,onChange:e=>t({opacity:e}),min:0,max:100,step:1})}),y&&(0,s.jsx)(p.PanelBody,{children:(0,s.jsx)(u,{value:e.anchorPosition||"bottom",onChange:e=>t({anchorPosition:e})})})]}),w]})},save:function({attributes:e}){const t=n.useBlockProps.save(),{children:o,...r}=n.useInnerBlocksProps.save(t),i=e.className?.includes("is-style-anchored");return(0,s.jsx)("dialog",{...r,"data-trigger":e.trigger||"click","data-expiry":e.cookieExpiration,"data-anchor-position":i?e.anchorPosition||"bottom":void 0,"data-backdrop-opacity":(e.opacity||1)/100,"data-backdrop-color":e.backgroundColor,"data-dismiss-on-submit":e.dismissOnSubmit?"true":"false",closedby:!1===e.dismissible?"none":"any",children:o})},deprecated:d})}},o={};function r(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,o,i,a)=>{if(!o){var n=1/0;for(c=0;c<e.length;c++){for(var[o,i,a]=e[c],p=!0,s=0;s<o.length;s++)(!1&a||n>=a)&&Object.keys(r.O).every(e=>r.O[e](o[s]))?o.splice(s--,1):(p=!1,a<n&&(n=a));if(p){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[n,p,s]=o,l=0;if(n.some(t=>0!==e[t])){for(i in p)r.o(p,i)&&(r.m[i]=p[i]);if(s)var c=s(r)}for(t&&t(o);l<n.length;l++)a=n[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},o=globalThis.webpackChunkpopup=globalThis.webpackChunkpopup||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=r.O(void 0,[350],()=>r(254));i=r.O(i)})();