{"version":3,"file":"view.js","mappings":"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","sources":["webpack://popup/./src/view.js"],"sourcesContent":["const mouseEvent = ( e ) => {\n\tconst shouldShowExitIntent =\n\t\t! e.toElement && ! e.relatedTarget && e.clientY < 10;\n\n\tif ( shouldShowExitIntent ) {\n\t\tdocument.removeEventListener( 'mouseout', mouseEvent );\n\t\tdocument.querySelector( 'html' ).classList.add( 'has-modal-open' );\n\t\tdocument\n\t\t\t.querySelector( '.wp-block-hm-popup[data-trigger=\"exit\"]' )\n\t\t\t.showModal();\n\t\twindow.localStorage.setItem( 'exitIntentShown', Date.now() );\n\t}\n};\n\nconst bootstrap = () => {\n\tlet exitIntentSetup = false;\n\tdocument.querySelectorAll( '.wp-block-hm-popup' ).forEach( ( popup ) => {\n\t\t// Block selectors API doesn't work so we need to\n\n\t\t// On close remove HTML class.\n\t\tpopup.addEventListener( 'close', () => {\n\t\t\tdocument\n\t\t\t\t.querySelector( 'html' )\n\t\t\t\t.classList.remove( 'has-modal-open' );\n\t\t} );\n\n\t\t// On backdrop click, close modal.\n\t\tpopup.addEventListener( 'mousedown', ( event ) => {\n\t\t\tif ( event.target === event.currentTarget ) {\n\t\t\t\tevent.currentTarget.close();\n\t\t\t}\n\t\t} );\n\n\t\t// Handle click trigger.\n\t\tif ( popup?.dataset.trigger === 'click' ) {\n\t\t\tdocument\n\t\t\t\t.querySelectorAll( `[href$=\"#${ popup.id || 'open-popup' }\"]` )\n\t\t\t\t.forEach( ( trigger ) => {\n\t\t\t\t\ttrigger.addEventListener( 'click', ( event ) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t.querySelector( 'html' )\n\t\t\t\t\t\t\t.classList.add( 'has-modal-open' );\n\t\t\t\t\t\tpopup.showModal();\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\n\t\t// Handle exit intent trigger.\n\t\tif ( popup?.dataset.trigger === 'exit' ) {\n\t\t\t// Get expiry setting on local storage value.\n\t\t\tconst expirationDays = parseInt( popup?.dataset.expiry || 7, 10 );\n\n\t\t\tif (\n\t\t\t\tparseInt(\n\t\t\t\t\twindow.localStorage.getItem( 'exitIntentShown' ) || 0,\n\t\t\t\t\t10\n\t\t\t\t) <\n\t\t\t\t\tDate.now() - expirationDays * 24 * 60 * 60 * 1000 &&\n\t\t\t\t! exitIntentSetup\n\t\t\t) {\n\t\t\t\texitIntentSetup = true;\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tdocument.addEventListener( 'mouseout', mouseEvent );\n\t\t\t\t}, 2000 );\n\t\t\t}\n\t\t}\n\t} );\n\n\t// Bind close events.\n\tdocument\n\t\t.querySelectorAll(\n\t\t\t[\n\t\t\t\t'.wp-block-hm-popup__close',\n\t\t\t\t'.wp-block-hm-popup [href$=\"#close\"]',\n\t\t\t].join( ',' )\n\t\t)\n\t\t.forEach( ( el ) => {\n\t\t\tel.addEventListener( 'click', ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.currentTarget.closest( '.wp-block-hm-popup' ).close();\n\t\t\t} );\n\t\t} );\n};\n\n// Handle async scripts.\nif ( document.readyState !== 'loading' ) {\n\tbootstrap();\n} else {\n\tdocument.addEventListener( 'DOMContentLoaded', bootstrap );\n}\n"],"names":["mouseEvent","e","shouldShowExitIntent","toElement","relatedTarget","clientY","document","removeEventListener","querySelector","classList","add","showModal","window","localStorage","setItem","Date","now","bootstrap","exitIntentSetup","querySelectorAll","forEach","popup","addEventListener","remove","event","target","currentTarget","close","dataset","trigger","id","preventDefault","expirationDays","parseInt","expiry","getItem","setTimeout","join","el","closest","readyState"],"sourceRoot":""}